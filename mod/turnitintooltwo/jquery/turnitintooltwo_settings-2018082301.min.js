jQuery(document).ready(function($){if($(".settingsform fieldset div.formsettingheading").length>0){var tabmenu=$(".settingsform fieldset div.formsettingheading:first").html();tabmenu.indexOf("tabtree")>=0&&($(".settingsform fieldset div.formsettingheading:first").remove(),$(".settingsform h2:first").after(tabmenu))}$('input[name="selectallcb"]').click(function(){$(this).prop("checked")?($(".browser_checkbox").prop("checked",!0),$(".browser_checkbox:checked").length>0?$(".create_checkboxes").slideDown():$(".create_checkboxes").slideUp()):($(".browser_checkbox").prop("checked",!1),$(".create_checkboxes").slideUp())}),$(".test_connection").length>0&&(""==$("#id_s_turnitintooltwo_accountid").val()&&""==$("#id_s_turnitintooltwo_secretkey").val()||($(".test_connection").show(),$("#test_link").show()),$("#id_s_turnitintooltwo_accountid, #id_s_turnitintooltwo_secretkey, #id_s_turnitintooltwo_apiurl").keyup(function(){$("#testing_container").hide();var t=$("#id_s_turnitintooltwo_accountid").val(),e=$("#id_s_turnitintooltwo_secretkey").val();t=t.trim(),e=e.trim(),0==t.length||0==e.length?($("#test_result").hide(),$(".test_connection").hide()):($(".test_connection").show(),$("#test_link").show())}),$("#test_link").click(function(){$("#test_result").hide(),$("input, #id_s_turnitintooltwo_apiurl").prop("disabled",!0),$("#test_link").hide(),$("#test_result").css("opacity",""),$("#test_result").removeClass("test_link_success test_link_fail"),$("#testing_container").show();var url="ajax.php";$(".settingsform fieldset div.formsettingheading").length>0&&(url="../mod/turnitintooltwo/ajax.php");var accountid=$("#id_s_turnitintooltwo_accountid").val(),accountshared=$("#id_s_turnitintooltwo_secretkey").val(),accounturl=$("#id_s_turnitintooltwo_apiurl").val();$.ajax({type:"POST",url:url,dataType:"json",data:{action:"test_connection",sesskey:M.cfg.sesskey,accountid:accountid,accountshared:accountshared,url:accounturl},success:function(data){eval(data),$("#testing_container").hide(),"success"==data.connection_status?$("#test_result").addClass("test_link_success"):$("#test_result").addClass("test_link_fail"),$("#test_result").html(data.msg),$("#test_result").show(),$("#test_link").show(),$("input, #id_s_turnitintooltwo_apiurl").prop("disabled",!1)}})}))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInR1cm5pdGludG9vbHR3b19zZXR0aW5ncy5qcyJdLCJuYW1lcyI6WyJqUXVlcnkiLCJkb2N1bWVudCIsInJlYWR5IiwiJCIsImxlbmd0aCIsInRhYm1lbnUiLCJodG1sIiwiaW5kZXhPZiIsInJlbW92ZSIsImFmdGVyIiwiY2xpY2siLCJ0aGlzIiwicHJvcCIsInNsaWRlRG93biIsInNsaWRlVXAiLCJ2YWwiLCJzaG93Iiwia2V5dXAiLCJoaWRlIiwiYWNjb3VudGlkIiwiYWNjb3VudHNoYXJlZCIsInRyaW0iLCJjc3MiLCJyZW1vdmVDbGFzcyIsInVybCIsImFjY291bnR1cmwiLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwiZGF0YSIsImFjdGlvbiIsInNlc3NrZXkiLCJNIiwiY2ZnIiwic3VjY2VzcyIsImV2YWwiLCJjb25uZWN0aW9uX3N0YXR1cyIsImFkZENsYXNzIiwibXNnIl0sIm1hcHBpbmdzIjoiQUFLQUEsT0FBT0MsVUFBVUMsTUFBTSxTQUFTQyxHQUM1QixHQUFJQSxFQUFFLGlEQUFpREMsT0FBUyxFQUFHLENBQy9ELEdBQUlDLFNBQVVGLEVBQUUsdURBQXVERyxNQUNuRUQsU0FBUUUsUUFBUSxZQUFjLElBQzlCSixFQUFFLHVEQUF1REssU0FDekRMLEVBQUUsMEJBQTBCTSxNQUFNSixVQUkxQ0YsRUFBRSw2QkFBNkJPLE1BQU0sV0FDN0JQLEVBQUVRLE1BQU1DLEtBQUssWUFDYlQsRUFBRSxxQkFBcUJTLEtBQUssV0FBVyxHQUNuQ1QsRUFBRSw2QkFBNkJDLE9BQVMsRUFDeENELEVBQUUsc0JBQXNCVSxZQUV4QlYsRUFBRSxzQkFBc0JXLFlBRzVCWCxFQUFFLHFCQUFxQlMsS0FBSyxXQUFXLEdBQ3ZDVCxFQUFFLHNCQUFzQlcsYUFJNUJYLEVBQUUsb0JBQW9CQyxPQUFTLElBQ21CLElBQTlDRCxFQUFFLG1DQUFtQ1ksT0FBNkQsSUFBOUNaLEVBQUUsbUNBQW1DWSxRQUN6RlosRUFBRSxvQkFBb0JhLE9BQ3RCYixFQUFFLGNBQWNhLFFBR3BCYixFQUFFLGtHQUFrR2MsTUFBTSxXQUN0R2QsRUFBRSxzQkFBc0JlLE1BRXhCLElBQUlDLEdBQVloQixFQUFFLG1DQUFtQ1ksTUFDakRLLEVBQWdCakIsRUFBRSxtQ0FBbUNZLEtBR3pESSxHQUFZQSxFQUFVRSxPQUN0QkQsRUFBZ0JBLEVBQWNDLE9BQ04sR0FBcEJGLEVBQVVmLFFBQXVDLEdBQXhCZ0IsRUFBY2hCLFFBQ3ZDRCxFQUFFLGdCQUFnQmUsT0FDbEJmLEVBQUUsb0JBQW9CZSxTQUV0QmYsRUFBRSxvQkFBb0JhLE9BQ3RCYixFQUFFLGNBQWNhLFVBSXhCYixFQUFFLGNBQWNPLE1BQU0sV0FDbEJQLEVBQUUsZ0JBQWdCZSxPQUNsQmYsRUFBRSx1Q0FBdUNTLEtBQUssWUFBWSxHQUMxRFQsRUFBRSxjQUFjZSxPQUNoQmYsRUFBRSxnQkFBZ0JtQixJQUFJLFVBQVcsSUFDakNuQixFQUFFLGdCQUFnQm9CLFlBQVksb0NBQzlCcEIsRUFBRSxzQkFBc0JhLE1BR3hCLElBQUlRLEtBQU0sVUFDTnJCLEdBQUUsaURBQWlEQyxPQUFTLElBQzVEb0IsSUFBTSxrQ0FHVixJQUFJTCxXQUFZaEIsRUFBRSxtQ0FBbUNZLE1BQ2pESyxjQUFnQmpCLEVBQUUsbUNBQW1DWSxNQUNyRFUsV0FBYXRCLEVBQUUsZ0NBQWdDWSxLQUVuRFosR0FBRXVCLE1BQ0VDLEtBQU0sT0FDTkgsSUFBS0EsSUFDTEksU0FBVSxPQUNWQyxNQUFPQyxPQUFRLGtCQUFtQkMsUUFBU0MsRUFBRUMsSUFBSUYsUUFBU1osVUFBV0EsVUFBV0MsY0FBZUEsY0FBZUksSUFBS0MsWUFDbkhTLFFBQVMsU0FBU0wsTUFDZE0sS0FBS04sTUFFTDFCLEVBQUUsc0JBQXNCZSxPQUVNLFdBQTFCVyxLQUFLTyxrQkFDTGpDLEVBQUUsZ0JBQWdCa0MsU0FBUyxxQkFFM0JsQyxFQUFFLGdCQUFnQmtDLFNBQVMsa0JBRy9CbEMsRUFBRSxnQkFBZ0JHLEtBQUt1QixLQUFLUyxLQUM1Qm5DLEVBQUUsZ0JBQWdCYSxPQUNsQmIsRUFBRSxjQUFjYSxPQUNoQmIsRUFBRSx1Q0FBdUNTLEtBQUssWUFBWSIsImZpbGUiOiJ0dXJuaXRpbnRvb2x0d29fc2V0dGluZ3MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFRoaXMgc21hbGwgcGllY2Ugb2Ygc2NyaXB0IGlzIGEgd29ya2Fyb3VuZCB0aGF0J3MgbmVlZGVkIHRvIGFkZCB0YWJzIGluIHRvXG4gKiB0aGUgc2V0dGluZ3MgcGFnZS4gVGhleSBuZWVkIHRvIGJlIHJlbW92ZWQgZnJvbSB0aGUgc2V0dGluZ3MgZm9ybSBhbmQgcGxhY2VkXG4gKiBvdXRzaWRlIHRoYXQgY29udGFpbmluZyBmaWVsZHNldC5cbiAqL1xualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKSB7XG4gICAgaWYgKCQoJy5zZXR0aW5nc2Zvcm0gZmllbGRzZXQgZGl2LmZvcm1zZXR0aW5naGVhZGluZycpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIHRhYm1lbnUgPSAkKCcuc2V0dGluZ3Nmb3JtIGZpZWxkc2V0IGRpdi5mb3Jtc2V0dGluZ2hlYWRpbmc6Zmlyc3QnKS5odG1sKCk7XG4gICAgICAgIGlmICh0YWJtZW51LmluZGV4T2YoXCJ0YWJ0cmVlXCIpID49IDApIHtcbiAgICAgICAgICAgICQoJy5zZXR0aW5nc2Zvcm0gZmllbGRzZXQgZGl2LmZvcm1zZXR0aW5naGVhZGluZzpmaXJzdCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCgnLnNldHRpbmdzZm9ybSBoMjpmaXJzdCcpLmFmdGVyKHRhYm1lbnUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgJCgnaW5wdXRbbmFtZT1cInNlbGVjdGFsbGNiXCJdJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgICAgJCgnLmJyb3dzZXJfY2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAoJCgnLmJyb3dzZXJfY2hlY2tib3g6Y2hlY2tlZCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAkKCcuY3JlYXRlX2NoZWNrYm94ZXMnKS5zbGlkZURvd24oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLmNyZWF0ZV9jaGVja2JveGVzJykuc2xpZGVVcCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLmJyb3dzZXJfY2hlY2tib3gnKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgJCgnLmNyZWF0ZV9jaGVja2JveGVzJykuc2xpZGVVcCgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoJCgnLnRlc3RfY29ubmVjdGlvbicpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKCQoJyNpZF9zX3R1cm5pdGludG9vbHR3b19hY2NvdW50aWQnKS52YWwoKSAhPSAnJyB8fCAkKCcjaWRfc190dXJuaXRpbnRvb2x0d29fc2VjcmV0a2V5JykudmFsKCkgIT0gJycpIHtcbiAgICAgICAgICAgICQoJy50ZXN0X2Nvbm5lY3Rpb24nKS5zaG93KCk7XG4gICAgICAgICAgICAkKCcjdGVzdF9saW5rJykuc2hvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCgnI2lkX3NfdHVybml0aW50b29sdHdvX2FjY291bnRpZCwgI2lkX3NfdHVybml0aW50b29sdHdvX3NlY3JldGtleSwgI2lkX3NfdHVybml0aW50b29sdHdvX2FwaXVybCcpLmtleXVwKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJCgnI3Rlc3RpbmdfY29udGFpbmVyJykuaGlkZSgpO1xuXG4gICAgICAgICAgICB2YXIgYWNjb3VudGlkID0gJCgnI2lkX3NfdHVybml0aW50b29sdHdvX2FjY291bnRpZCcpLnZhbCgpO1xuICAgICAgICAgICAgdmFyIGFjY291bnRzaGFyZWQgPSAkKCcjaWRfc190dXJuaXRpbnRvb2x0d29fc2VjcmV0a2V5JykudmFsKCk7XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGV5IGFyZW4ndCBlbXB0eSBzdHJpbmdzLlxuICAgICAgICAgICAgYWNjb3VudGlkID0gYWNjb3VudGlkLnRyaW0oKTtcbiAgICAgICAgICAgIGFjY291bnRzaGFyZWQgPSBhY2NvdW50c2hhcmVkLnRyaW0oKTtcbiAgICAgICAgICAgIGlmIChhY2NvdW50aWQubGVuZ3RoID09IDAgfHwgYWNjb3VudHNoYXJlZC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICQoJyN0ZXN0X3Jlc3VsdCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcudGVzdF9jb25uZWN0aW9uJykuaGlkZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcudGVzdF9jb25uZWN0aW9uJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoJyN0ZXN0X2xpbmsnKS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJyN0ZXN0X2xpbmsnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoJyN0ZXN0X3Jlc3VsdCcpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJ2lucHV0LCAjaWRfc190dXJuaXRpbnRvb2x0d29fYXBpdXJsJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICQoJyN0ZXN0X2xpbmsnKS5oaWRlKCk7XG4gICAgICAgICAgICAkKFwiI3Rlc3RfcmVzdWx0XCIpLmNzcygnb3BhY2l0eScsICcnKTtcbiAgICAgICAgICAgICQoJyN0ZXN0X3Jlc3VsdCcpLnJlbW92ZUNsYXNzKCd0ZXN0X2xpbmtfc3VjY2VzcyB0ZXN0X2xpbmtfZmFpbCcpO1xuICAgICAgICAgICAgJCgnI3Rlc3RpbmdfY29udGFpbmVyJykuc2hvdygpO1xuXG4gICAgICAgICAgICAvLyBDaGFuZ2UgVXJsIGRlcGVuZGluZyBvbiBTZXR0aW5ncyBwYWdlLlxuICAgICAgICAgICAgdmFyIHVybCA9IFwiYWpheC5waHBcIjtcbiAgICAgICAgICAgIGlmICgkKCcuc2V0dGluZ3Nmb3JtIGZpZWxkc2V0IGRpdi5mb3Jtc2V0dGluZ2hlYWRpbmcnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gXCIuLi9tb2QvdHVybml0aW50b29sdHdvL2FqYXgucGhwXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBhY2NvdW50aWQgPSAkKCcjaWRfc190dXJuaXRpbnRvb2x0d29fYWNjb3VudGlkJykudmFsKCk7XG4gICAgICAgICAgICB2YXIgYWNjb3VudHNoYXJlZCA9ICQoJyNpZF9zX3R1cm5pdGludG9vbHR3b19zZWNyZXRrZXknKS52YWwoKTtcbiAgICAgICAgICAgIHZhciBhY2NvdW50dXJsID0gJCgnI2lkX3NfdHVybml0aW50b29sdHdvX2FwaXVybCcpLnZhbCgpO1xuXG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcbiAgICAgICAgICAgICAgICBkYXRhOiB7YWN0aW9uOiBcInRlc3RfY29ubmVjdGlvblwiLCBzZXNza2V5OiBNLmNmZy5zZXNza2V5LCBhY2NvdW50aWQ6IGFjY291bnRpZCwgYWNjb3VudHNoYXJlZDogYWNjb3VudHNoYXJlZCwgdXJsOiBhY2NvdW50dXJsfSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGV2YWwoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnI3Rlc3RpbmdfY29udGFpbmVyJykuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvbm5lY3Rpb25fc3RhdHVzID09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjdGVzdF9yZXN1bHQnKS5hZGRDbGFzcygndGVzdF9saW5rX3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyN0ZXN0X3Jlc3VsdCcpLmFkZENsYXNzKCd0ZXN0X2xpbmtfZmFpbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJCgnI3Rlc3RfcmVzdWx0JykuaHRtbChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgICQoJyN0ZXN0X3Jlc3VsdCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3Rlc3RfbGluaycpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnaW5wdXQsICNpZF9zX3R1cm5pdGludG9vbHR3b19hcGl1cmwnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufSk7Il19
